import{Q as L,r as o,o as j,a as z,b as d,c as m,d as t,u as B,w as s,F as D,f,Z as P,g as a,h as w,k as b,z as S,e as T,m as M}from"./app-BxcjcWUP.js";import{A as $}from"./AuthenticatedLayout-Csk7A1cc.js";import{H}from"./Header-GYfsRgHP.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./granny_logo-Bzff25CZ.js";import"./BackButton-CG7jGwel.js";const O={class:"content"},Q={class:"d-flex flex-column align-center justify-center"},W={key:0,class:"d-flex flex-column upload mb-2 justify-evenly"},Z=["src"],q={key:0},G={key:1,class:"d-flex upload mb-2 justify-evenly"},J={class:"inner-card d-flex flex-column justify-between"},K={__name:"NewAnalysisPage",setup(X){const h=L().props.auth.user,A=o(!1),v=o(""),r=o(!1),p=o(!1),u=o(null),i=o(null),g=o(""),_=o(""),c=o([]),F=o([{title:"Pome Fruit - Apple",value:"pome_fruit-v1_0"}]),y=()=>{A.value=window.innerWidth<=1e3},k=()=>{r.value=!0,window.addEventListener("focus",()=>{r.value=!1},{once:!0}),v.value.click()},C=n=>{u.value=n.target.files[0],i.value=URL.createObjectURL(u.value),console.log(u.value)},I=async()=>{p.value=!0;const n=new FormData;n.append("image",u.value),n.append("custom_id",_.value),n.append("a1_model",g.value),n.append("user_id",h.id),n.append("user_name",h.name);try{const e=await T.post("/api/v1/newAnalysis",n,{headers:{"Content-Type":"multipart/form-data"}});c.value=e.data,console.log("Image uploaded successfully:",c.value.id),p.value=!1,console.log(c.value.id),M.visit("/segmentation/"+c.value.id,{method:"get"})}catch(e){console.error("Error uploading image:",e)}};return j(()=>{y(),window.addEventListener("resize",y)}),z(()=>{window.removeEventListener("resize",y)}),(n,e)=>{const x=d("v-btn"),V=d("v-card"),N=d("v-list-item"),U=d("v-select"),E=d("v-text-field");return f(),m(D,null,[t(B(P),{title:"New Analysis"}),t($,null,{default:s(()=>[t(H,{title:"New Analysis - Apple",location:"dashboard"}),a("div",O,[t(V,{color:"accent",class:"card"},{default:s(()=>[e[7]||(e[7]=a("div",{class:"card-title"},[a("div",{class:"text-h5 font text-white"},"Image Upload")],-1)),a("div",Q,[i.value?(f(),m("div",W,[a("img",{src:i.value,class:"image mb-5"},null,8,Z),i.value?(f(),m("div",q,[t(x,{class:"font text-accent",color:"secondary",loading:r.value,onClick:e[0]||(e[0]=l=>k())},{default:s(()=>e[5]||(e[5]=[w(" Change Image ")])),_:1},8,["loading"]),a("input",{ref_key:"uploader",ref:v,class:"d-none",type:"file",onChange:C},null,544)])):b("",!0)])):b("",!0),i.value?b("",!0):(f(),m("div",G,[t(x,{class:"font text-accent",color:"secondary",loading:r.value,onClick:e[1]||(e[1]=l=>k())},{default:s(()=>e[6]||(e[6]=[w(" Upload File ")])),_:1},8,["loading"]),a("input",{ref_key:"uploader",ref:v,class:"d-none",type:"file",onChange:C},null,544)]))])]),_:1}),t(V,{color:"accent",class:"card"},{default:s(()=>[e[10]||(e[10]=a("div",{class:"text-h5 font card-title text-white"},"Input Data",-1)),a("div",J,[a("div",null,[t(U,{class:"font text-accent",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l),items:F.value,label:"Select Model"},{item:s(({props:l,item:Y})=>[t(N,S({class:"text-accent font"},l),null,16)]),_:1},8,["modelValue","items"]),t(E,{label:"Enter Custom ID",class:"font text-accent",modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l)},null,8,["modelValue"])]),e[9]||(e[9]=a("div",{class:"font text-accent mb-5"}," * The segmentation step takes the image of a tray of fruit and extracts each individual piece of fruit into a new image. The fruit itself needs to be isolated from any background material in the image so that the rating modules can analyze only the fruit and none of the other elements in the image. ",-1)),t(x,{color:"secondary",class:"font text-accent",loading:p.value,onClick:e[4]||(e[4]=l=>I())},{default:s(()=>e[8]||(e[8]=[w(" Submit for Segmentation ")])),_:1},8,["loading"])])]),_:1})])]),_:1})],64)}}},se=R(K,[["__scopeId","data-v-2b7827cd"]]);export{se as default};
